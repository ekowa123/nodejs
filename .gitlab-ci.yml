stages:
  - build
  #- upload
  #- test
  #- deploy
  - autotest

build_project:
  stage: build
  only:
    - master
  tags:
    - dockerindependent
  script:
    - docker build -t registry.carsworld.id/ahmad/hello-node:buildlocal .

#upload_project:
  #stage: upload
  #only:
    #- master
  #tags:
    #- dockerindependent
  #script:
    #- docker push registry.carsworld.id/ahmad/hello-node:buildlocal

#test_project:
  #stage: test
  #only:
    #- master
  #tags:
    #- dockerindependent
  #script:
    #- docker run --name test_hello_node -dit registry.carsworld.id/ahmad/hello-node:buildlocal sh

#deploy_project:
  #stage: deploy
  #only:
    #- master
  #tags:
    #- dockerindependent
  #when: manual
  #script:
    #- docker run --name ahmad_hello_node -dit -p 8880:3000 registry.carsworld.id/ahmad/hello-node:buildlocal sh

autotest_project:
  stage: autotest
  only:
    - master
  tags:
    - katalon
  #when: manual
  script:
    - cd /home/ahmad/Katalon_Studio_Linux_64-6.2.0 && ./katalon -noSplash  -runMode=console -consoleLog -projectPath="/home/ahmad/Katalon Studio/ArdimasyuWeb/ArdimasyuWeb.prj" -retry=0 -testSuitePath="Test Suites/Signin01" -browserType="Chrome (headless)"
